version: "3.8"
services:
  cheesepie:
    image: python:3.11-slim
    container_name: cheesepie
    environment:
      - HOST=0.0.0.0
      - PORT=8000
      # Optional:
      # - GIT_REPO=https://github.com/your-org/CheesePie3.git
      # - GIT_BRANCH=main
    working_dir: /srv/cheesepie
    command: >
      /bin/bash -lc "apt-get update && apt-get install -y --no-install-recommends git ffmpeg && chmod +x scripts/entrypoint.sh && ./scripts/entrypoint.sh"
    ports:
      - "8000:8000"
    volumes:
      - /mnt/cheese/general/services/cheesepie:/srv/cheesepie
    restart: unless-stopped
