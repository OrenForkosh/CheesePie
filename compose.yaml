version: "3.8"
services:
  cheesepie:
    image: python:3.11
    container_name: cheesepie
    environment:
      - HOST=0.0.0.0
      - PORT=8000
      - PYTHONUNBUFFERED=1
    working_dir: /srv/cheesepie
    command: >
      bash -lc "chmod +x scripts/entrypoint.sh && ./scripts/entrypoint.sh"
    ports:
      - "8000:8000"
    volumes:
      - ./:/srv/cheesepie
      - /volume1/homes/MOUSE/surveillance:/mnt/MOUSE/surveillance:ro
      - /lab/Datasets/Mice/HUJI/experiments:/mnt/MOUSE/experiments:rw
    restart: unless-stopped
